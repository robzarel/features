[{"id":0,"name":"validateValue","description":"Поочерёдно запускает валидаторы для переданного значения. Если валидация прошла неуспешно, то дальнейший запуск валидаторов не происходит","code":"type%20ValidationResult%20=%20string%20%7C%20null;%0Atype%20Validator%3CT%3E%20=%20(params:%20T)%20=%3E%20Promise%3CValidationResult%3E;%0Atype%20GetValidator%3COptions,%20Params%3E%20=%20(options?:%20Options)%20=%3E%20Validator%3CParams%3E;%0A%0Aconst%20validateValue%20=%20async%20%3CT%3E(%0A%20%20value:%20T,%0A%20%20validators:%20Validator%3CT%3E%5B%5D%0A):%20Promise%3CValidationResult%3E%20=%3E%20%7B%0A%20%20let%20validationResult:%20ValidationResult%20=%20null;%0A%20%20let%20i%20=%200;%0A%0A%20%20while%20(validationResult%20===%20null%20&&%20i%20%3C%20validators.length)%20%7B%0A%20%20%20%20const%20res%20=%20await%20validators%5Bi%5D(value);%0A%0A%20%20%20%20res%20&&%20(validationResult%20=%20res);%0A%20%20%20%20i++;%0A%20%20%7D%0A%0A%20%20return%20validationResult;%0A%7D;%0A%0Aexport%20type%20%7B%20ValidationResult,%20Validator,%20GetValidator%20%7D;%0A%0Aexport%20default%20validateValue;%0A","language":"typescript","related":[{"type":"feature","id":0},{"type":"feature","id":0},{"type":"snippet","id":1}]},{"id":1,"name":"required validator","description":"Проверяет наличие значения (является ли значение истинным)","code":"import%20type%20%7B%20GetValidator%20%7D%20from%20'./index';%0A%0Aconst%20required:%20GetValidator%3Cstring,%20string%3E%20=%20(message%20=%20'%D0%9E%D0%B1%D1%8F%D0%B7%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BF%D0%BE%D0%BB%D0%B5')%20=%3E%20%7B%0A%20%20return%20async%20(value)%20=%3E%20(value%20?%20null%20:%20message);%0A%7D;%0A%0Aexport%20default%20required;","language":"typescript","related":[{"type":"feature","id":0},{"type":"snippet","id":0}]},{"id":2,"name":"maxLength validator","description":"Проверяет, является ли значение меньше, чем максимально установленное количество символов","code":"%0Aimport%20type%20%7B%20GetValidator%20%7D%20from%20'./index';%0A%0Aconst%20DEFAULT_MAX_CHAR_COUNT%20=%20100;%0A%0Aconst%20maxLength:%20GetValidator%3Cnumber,%20string%3E%20=%20(%0A%20%20maxCharCount%20=%20DEFAULT_MAX_CHAR_COUNT%0A)%20=%3E%20%7B%0A%20%20if%20(maxCharCount%20%3C=%200)%20%7B%0A%20%20%20%20throw%20new%20Error(%0A%20%20%20%20%20%20'%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%82%D0%BE%D1%80%20maxLength%20%D0%BE%D0%B6%D0%B8%D0%B4%D0%B0%D0%B5%D1%82%20%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%BB%D0%B8%D0%BD%D1%8B%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8,%20%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%20%7BmaxCharCount%7D'%0A%20%20%20%20);%0A%20%20%7D%0A%0A%20%20return%20async%20(value)%20=%3E%0A%20%20%20%20value.length%20%3C=%20maxCharCount%0A%20%20%20%20%20%20?%20null%0A%20%20%20%20%20%20:%20'%D0%9A%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%BE%D0%B2%20%D0%BD%D0%B5%20%D0%B4%D0%BE%D0%BB%D0%B6%D0%BD%D0%BE%20%D0%BF%D1%80%D0%B5%D0%B2%D1%8B%D1%88%D0%B0%D1%82%D1%8C%20%7BmaxCharCount%7D';%0A%7D;%0A%0Aexport%20%7B%20DEFAULT_MAX_CHAR_COUNT%20%7D;%0Aexport%20default%20maxLength;%0A","language":"typescript","related":[{"type":"feature","id":0},{"type":"snippet","id":0}]},{"id":3,"name":"minLength validator","description":"Проверяет, является ли значение больше, чем минимально установленное количество символов","code":"%0Aimport%20type%20%7B%20GetValidator%20%7D%20from%20'./index';%0A%0Aconst%20DEFAULT_MIN_CHAR_COUNT%20=%201;%0A%0Aconst%20minLength:%20GetValidator%3Cnumber,%20string%3E%20=%20(%0A%20%20minCharCount%20=%20DEFAULT_MIN_CHAR_COUNT%0A)%20=%3E%20%7B%0A%20%20if%20(minCharCount%20%3C=%200)%20%7B%0A%20%20%20%20throw%20new%20Error(%0A%20%20%20%20%20%20'%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%82%D0%BE%D1%80%20minLength%20%D0%BE%D0%B6%D0%B8%D0%B4%D0%B0%D0%B5%D1%82%20%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BC%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%BB%D0%B8%D0%BD%D1%8B%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8,%20%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%20%7BminCharCount%7D'%0A%20%20%20%20);%0A%20%20%7D%0A%0A%20%20return%20async%20(value)%20=%3E%0A%20%20%20%20value.length%20%3E=%20minCharCount%0A%20%20%20%20%20%20?%20null%0A%20%20%20%20%20%20:%20'%D0%9A%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%BE%D0%B2%20%D0%BD%D0%B5%20%D0%B4%D0%BE%D0%BB%D0%B6%D0%BD%D0%BE%20%D0%B1%D1%8B%D1%82%D1%8C%20%D0%BC%D0%B5%D0%BD%D1%8C%D1%88%D0%B5%20%7BminCharCount%7D';%0A%7D;%0A%0Aexport%20%7B%20DEFAULT_MIN_CHAR_COUNT%20%7D;%0Aexport%20default%20minLength;%0A","language":"typescript","related":[{"type":"feature","id":0},{"type":"snippet","id":0}]},{"id":4,"name":"maxFileSize validator","description":"Проверяет, является ли развер файла больше, чем максимально установленное значение","code":"%0Aimport%20type%20%7B%20GetValidator%20%7D%20from%20'./index';%0A%0A//%20%D0%BC%D0%B0%D0%BA%D1%81%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%D1%8B%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%BE%20%D0%B2%2010%D0%BC%D0%B1%0Aconst%20DEFAULT_MAX_SIZE_IN_BYTES%20=%2010485760;%0A%0Aconst%20maxFileSize:%20GetValidator%3Cnumber,%20File%3E%20=%20(%0A%20%20maxSizeInBytes%20=%20DEFAULT_MAX_SIZE_IN_BYTES%0A)%20=%3E%20%7B%0A%20%20if%20(maxSizeInBytes%20%3C=%200)%20%7B%0A%20%20%20%20throw%20new%20Error(%0A%20%20%20%20%20%20'%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%82%D0%BE%D1%80%20maxFileSize%20%D0%BE%D0%B6%D0%B8%D0%B4%D0%B0%D0%B5%D1%82%20%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%D0%B0%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0,%20%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%20%7BmaxSizeInBytes%7D'%0A%20%20%20%20);%0A%20%20%7D%0A%0A%20%20return%20async%20(file)%20=%3E%0A%20%20%20%20file.size%20%3C=%20maxSizeInBytes%0A%20%20%20%20%20%20?%20null%0A%20%20%20%20%20%20:%20'%D0%A4%D0%B0%D0%B9%D0%BB%20%D0%B4%D0%BE%D0%BB%D0%B6%D0%B5%D0%BD%20%D0%B1%D1%8B%D1%82%D1%8C%20%D0%B4%D0%BE%20%7B(maxSizeInBytes%20/%201048576).toFixed(1)%7D%20%D0%BC%D0%B1';%0A%7D;%0A%0Aexport%20%7B%20DEFAULT_MAX_SIZE_IN_BYTES%20%7D;%0Aexport%20default%20maxFileSize;%0A","language":"typescript","related":[{"type":"feature","id":0},{"type":"snippet","id":0}]},{"id":5,"name":"imageMaxResolution validator","description":"Проверяет, является ли разрешение изображения больше, чем максимально установленное значение","code":"%0Aimport%20type%20%7B%20GetValidator%20%7D%20from%20'./index';%0Aimport%20getImageDimensions%20from%20'../get-image-dimensions';%0A%0Aconst%20DEFAULT_MAX_RESOLUTION_IN_PIXELS%20=%2025000000;%20//%2025%20mega%20pixels%0A%0Aconst%20MYMETYPE_WHITELIST%20=%20%5B%0A%20%20'image/png',%0A%20%20'image/jpeg',%0A%20%20'image/webp',%0A%20%20'image/gif',%0A%20%20'image/tiff',%0A%20%20'image/svg+xml',%0A%5D;%0A%0Aconst%20imageMaxResolution:%20GetValidator%3Cnumber,%20File%3E%20=%20(%0A%20%20maxResolutionInPixels%20=%20DEFAULT_MAX_RESOLUTION_IN_PIXELS,%0A%20%20mimeTypesToCheck%20=%20MYMETYPE_WHITELIST%0A)%20=%3E%20%7B%0A%20%20if%20(maxResolutionInPixels%20%3C=%200)%20%7B%0A%20%20%20%20throw%20new%20Error(%0A%20%20%20%20%20%20'%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%82%D0%BE%D1%80%20imageMaxResolution%20%D0%BE%D0%B6%D0%B8%D0%B4%D0%B0%D0%B5%D1%82%20%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D1%80%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F,%20%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%20%7BmaxResolutionInPixels%7D'%0A%20%20%20%20);%0A%20%20%7D%0A%0A%20%20return%20async%20(file)%20=%3E%20%7B%0A%20%20%20%20//%20%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%20%D0%B2%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8E%20%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE%20%D0%B4%D0%BB%D1%8F%20%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D1%85%20%D1%82%D0%B8%D0%BF%D0%BE%D0%B2%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9%0A%20%20%20%20if%20(!mimeTypesToCheck.includes(file.type))%20%7B%0A%20%20%20%20%20%20return%20null;%0A%20%20%20%20%7D%0A%0A%20%20%20%20let%20resolution%20=%20Infinity;%20//%20%D0%B4%D0%B5%D0%BB%D0%B0%D0%B5%D0%BC%20%D0%BD%D0%B5%D0%B2%D0%B0%D0%BB%D0%B8%D0%B4%D0%BD%D0%BE%D0%B5%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BF%D0%BE%20%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E%0A%20%20%20%20let%20errorMessage%20=%20null;%0A%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20const%20dimensions%20=%20await%20getImageDimensions(file);%0A%20%20%20%20%20%20dimensions%20&&%20(resolution%20=%20dimensions.width%20*%20dimensions.height);%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20errorMessage%20=%20'%D0%9D%D0%B5%D0%B2%D0%B0%D0%BB%D0%B8%D0%B4%D0%BD%D1%8B%D0%B9%20%D1%84%D0%B0%D0%B9%D0%BB%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F,%20%D1%81%D0%BC.%20%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D1%8C';%0A%20%20%20%20%20%20//%20eslint-disable-next-line%20no-console%0A%20%20%20%20%20%20console.error(%0A%20%20%20%20%20%20%20%20'%D0%9D%D0%B5%D0%B2%D0%BE%D0%B7%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE%20%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F.%20%D0%94%D0%B5%D1%82%D0%B0%D0%BB%D0%B8:%20%7Berror%7D'%0A%20%20%20%20%20%20);%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20resolution%20%3C=%20maxResolutionInPixels%0A%20%20%20%20%20%20?%20null%0A%20%20%20%20%20%20:%20errorMessage%20??%20'%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%BE%D0%BB%D0%B6%D0%BD%D0%BE%20%D0%B1%D1%8B%D1%82%D1%8C%20%D0%B4%D0%BE%20%7Bresolution%20/%201000000%7D%20%D0%BC%D0%BF';%0A%20%20%7D;%0A%7D;%0A%0Aexport%20%7B%20DEFAULT_MAX_RESOLUTION_IN_PIXELS%20%7D;%0Aexport%20default%20imageMaxResolution;%0A","language":"typescript","related":[{"type":"snippet","id":0},{"type":"snippet","id":6}]},{"id":6,"name":"getImageDimensions","description":"Возвращает ширину и высоту изображения, на основе переданного файла изображения","code":"%0A/**%0A%20*%20%D0%92%D0%BE%D0%B7%D0%B2%D1%80%D0%B0%D1%89%D0%B0%D0%B5%D1%82%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D0%B8%20%D0%B2%D1%8B%D1%81%D0%BE%D1%82%D1%83%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F,%20%D0%BD%D0%B0%20%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5%20%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F.%0A%20*%20%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D1%82%D1%81%D1%8F%20%D0%BF%D1%80%D0%B8%20%D0%B2%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D0%B8%20%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%D0%BE%D0%B2%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9.%0A%20*%20@param%20file%20%D0%A4%D0%B0%D0%B9%D0%BB%20%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%0A%20*/%0Aconst%20getImageDimensions%20=%20async%20(%0A%20%20file:%20File%0A):%20Promise%3C%7B%20width:%20number;%20height:%20number%20%7D%20%7C%20null%3E%20=%3E%20%7B%0A%20%20const%20img%20=%20new%20Image();%0A%20%20const%20url%20=%20window.URL.createObjectURL(file);%0A%20%20img.src%20=%20url;%0A%0A%20%20let%20res%20=%20null;%0A%0A%20%20try%20%7B%0A%20%20%20%20//%20https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decode%0A%20%20%20%20await%20img.decode();%0A%20%20%20%20res%20=%20%7B%20width:%20img.naturalWidth,%20height:%20img.naturalHeight%20%7D;%0A%20%20%7D%20catch%20(encodingError)%20%7B%0A%20%20%20%20//%20eslint-disable-next-line%20no-console%0A%20%20%20%20console.error(%0A%20%20%20%20%20%20encodingError%20instanceof%20Error%0A%20%20%20%20%20%20%20%20?%20encodingError.message%0A%20%20%20%20%20%20%20%20:%20'getImageDimensions:%20something%20went%20wrong%20during%20file%20encoding.'%0A%20%20%20%20);%0A%20%20%7D%20finally%20%7B%0A%20%20%20%20window.URL.revokeObjectURL(url);%0A%20%20%7D%0A%0A%20%20return%20res;%0A%7D;%0A%0Aexport%20default%20getImageDimensions;%0A","language":"typescript","related":[{"type":"snippet","id":5}]},{"id":7,"name":"date formatters","description":"Преобразование даты в строку нужного форамта (например YYYY.MM.DD)","code":"%0Aconst%20getDateParts%20=%20(date:%20Date)%20=%3E%20(%7B%0A%20%20day:%20'%7Bdate.getDate()%7D'.padStart(2,%20'0'),%0A%20%20month:%20'%7Bdate.getMonth()%20+%201%7D'.padStart(2,%20'0'),%0A%20%20year:%20'%7Bdate.getFullYear()%7D',%0A%7D);%0A%0A/**%0A%20*%20%D0%9F%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D1%83%D0%B5%D1%82%20%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9%20%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%20Date%20%D0%B2%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B0%20'YYYY-MM-DD'%0A%20*/%0Aconst%20toApiFormat%20=%20(date:%20Date)%20=%3E%20%7B%0A%20%20const%20%7B%20day,%20month,%20year%20%7D%20=%20getDateParts(date);%0A%20%20return%20'%7Byear%7D-%7Bmonth%7D-%7Bday%7D';%0A%7D;%0A%0A/**%0A%20*%20%D0%9F%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D1%83%D0%B5%D1%82%20%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9%20%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%20Date%20%D0%B2%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B0%20'DD.MM.YYYY'%0A%20*/%0Aconst%20toUserFormat%20=%20(date:%20Date)%20=%3E%20%7B%0A%20%20const%20%7B%20day,%20month,%20year%20%7D%20=%20getDateParts(date);%0A%20%20return%20'%7Bday%7D.%7Bmonth%7D.%7Byear%7D';%0A%7D;%0A","language":"typescript","related":[{"type":"feature","id":11}]},{"id":8,"name":"sub/add weeks/months","description":"Добавление и вычитание из предоставленной даты","code":"%0Aconst%20subWeeks%20=%20(date:%20Date,%20days:%20number)%20=%3E%20%7B%0A%20%20const%20result%20=%20new%20Date(date);%0A%20%20return%20new%20Date(result.setDate(result.getDate()%20-%207%20*%20days));%0A%7D;%0A%0Aconst%20subMonths%20=%20(date:%20Date,%20months:%20number)%20=%3E%20%7B%0A%20%20const%20result%20=%20new%20Date(date);%0A%20%20return%20new%20Date(result.setMonth(result.getMonth()%20-%20months));%0A%7D;%0A%0Aconst%20addWeeks%20=%20(date:%20Date,%20days:%20number)%20=%3E%20%7B%0A%20%20const%20result%20=%20new%20Date(date);%0A%20%20return%20new%20Date(result.setDate(result.getDate()%20+%207%20*%20days));%0A%7D;%0A%0Aconst%20addMonths%20=%20(date:%20Date,%20months:%20number)%20=%3E%20%7B%0A%20%20const%20result%20=%20new%20Date(date);%0A%20%20return%20new%20Date(result.setMonth(result.getMonth()%20+%20months));%0A%7D;%0A","language":"typescript","related":[{"type":"feature","id":11},{"type":"snippet","id":7}]},{"id":9,"name":"authFetch","description":"Обёртка над обычным fetch, которая подмешивает в заголовок токен","code":"%0Aimport%20%7B%20getToken%20%7D%20from%20'./tokenProvider';%0A%0A/**%20%D0%9E%D0%B1%D1%91%D1%80%D1%82%D0%BA%D0%B0%20%D0%BD%D0%B0%D0%B4%20%D0%BE%D0%B1%D1%8B%D1%87%D0%BD%D1%8B%D0%BC%20fetch,%20%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D0%B0%D1%8F%20%D0%BF%D0%BE%D0%B4%D0%BC%D0%B5%D1%88%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%20%D0%B2%20%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BE%D0%BA%20%D1%82%D0%BE%D0%BA%D0%B5%D0%BD%20*/%0A/**%20%D0%BD%D1%83%D0%B6%D0%BD%D0%BE%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D0%B4%D0%BB%D1%8F%20%D0%BB%D1%8E%D0%B1%D0%BE%D0%B3%D0%BE%20%D0%B7%D0%B0%D1%89%D0%B8%D1%89%D1%91%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%8D%D0%BD%D0%B4%D0%BF%D0%BE%D0%B9%D0%BD%D1%82%D0%B0%20*/%0Aconst%20authFetch%20=%20async%20(%0A%20%20input:%20RequestInfo,%0A%20%20init:%20RequestInit%20%7C%20undefined%20=%20%7B%7D,%0A%20%20token?:%20string%0A):%20Promise%3CResponse%3E%20=%3E%20%7B%0A%20%20const%20access_token%20=%20token%20%7C%7C%20getToken()?.value%20%7C%7C%20'no_token';%0A%0A%20%20if%20(access_token%20===%20'no_token')%20%7B%0A%20%20%20%20//%20eslint-disable-next-line%20no-console%0A%20%20%20%20console.warn('Making%20secure%20API%20call%20without%20an%20auth%20token');%0A%20%20%7D%0A%0A%20%20const%20options%20=%20%7B%20...init%20%7D;%0A%0A%20%20options.headers%20=%20%7B%0A%20%20%20%20...init.headers,%0A%20%20%20%20Authorization:%20'Bearer%20%7Baccess_token%7D',%0A%20%20%7D;%0A%0A%20%20return%20fetch(input,%20options);%0A%7D;%0A%0Aexport%20default%20authFetch;%0A","language":"typescript","related":[{"type":"feature","id":10},{"type":"snippet","id":10}]},{"id":10,"name":"tokenProvider","description":"Модуль, который хранит, удаляет и управляет значением токена, для доступа к приватным апи","code":"%0A/**%0A%20*%0A%20*%20%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D1%8C,%20%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D1%8B%D0%B9%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D1%82,%20%D1%83%D0%B4%D0%B0%D0%BB%D1%8F%D0%B5%D1%82%20%D0%B8%20%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D0%B5%D1%82%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%20%D1%82%D0%BE%D0%BA%D0%B5%D0%BD%D0%B0,%20%D0%B4%D0%BB%D1%8F%20%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0%20%D0%BA%20%D0%BF%D1%80%D0%B8%D0%B2%D0%B0%D1%82%D0%BD%D1%8B%D0%BC%20%D0%B0%D0%BF%D0%B8.%0A%20*/%0Atype%20StoredToken%20=%20%7B%0A%20%20value:%20string;%0A%20%20timeStamp:%20number;%0A%7D;%0A%0Aconst%20TOKEN_KEY%20=%20'admin_auth_token';%0A/**%0A%20*%20%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%20%D0%B8%D0%BC%D0%B5%D0%B5%D1%82%20%D1%84%D0%B8%D0%BA%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D0%B5%20%D0%B2%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B6%D0%B8%D0%B7%D0%BD%D0%B8.%0A%20*%20%D0%92%D0%B0%D0%B6%D0%BD%D0%BE,%20%D1%82%D0%B0%D0%BA%20%D0%BA%D0%B0%D0%BA%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BC%20%D0%B2%20localStorage%20%D0%B8%20%D1%83%D0%BC%D0%B5%D0%BD%D1%8C%D1%88%D0%B0%D0%B5%D0%BC%20%D1%80%D0%B8%D1%81%D0%BA%20%D0%B2%20%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B5%20xss.%0A%20*%20%D0%BF%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C%20%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE%20%D1%82%D1%83%D1%82%20https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them/%0A%20*%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B6%D0%B8%D0%B7%D0%BD%D0%B8%20%D1%82%D0%BE%D0%BA%D0%B5%D0%BD%D0%B0%2023%20%D1%87%D0%B0%D1%81%D0%B0%2059%20%D0%BC%D0%B8%D0%BD%D1%83%D1%82%0A%20*/%0Aconst%20TOKEN_TTL_MS%20=%2086340000;%0A%0Aconst%20isExpired%20=%20(timeStamp?:%20number):%20boolean%20=%3E%20%7B%0A%20%20if%20(!timeStamp)%20return%20false;%0A%0A%20%20const%20now%20=%20new%20Date().getTime();%0A%20%20const%20diff%20=%20now%20-%20timeStamp;%0A%0A%20%20return%20diff%20%3E%20TOKEN_TTL_MS;%0A%7D;%0A%0Aconst%20setToken%20=%20(access_token:%20string):%20void%20=%3E%20%7B%0A%20%20localStorage.setItem(%0A%20%20%20%20TOKEN_KEY,%0A%20%20%20%20JSON.stringify(%7B%0A%20%20%20%20%20%20value:%20access_token,%0A%20%20%20%20%20%20timeStamp:%20new%20Date().getTime(),%0A%20%20%20%20%7D)%0A%20%20);%0A%7D;%0A%0Aconst%20removeToken%20=%20():%20void%20=%3E%20%7B%0A%20%20localStorage.removeItem(TOKEN_KEY);%0A%7D;%0A%0Aconst%20getToken%20=%20():%20StoredToken%20%7C%20null%20=%3E%20%7B%0A%20%20let%20result%20=%20null;%0A%0A%20%20const%20storedToken%20=%20localStorage.getItem(TOKEN_KEY);%0A%20%20storedToken%20&&%20(result%20=%20JSON.parse(storedToken));%0A%0A%20%20return%20result;%0A%7D;%0A%0Aexport%20%7B%20getToken,%20setToken,%20removeToken,%20isExpired%20%7D;%0A","language":"typescript","related":[{"type":"feature","id":10},{"type":"snippet","id":9}]}]