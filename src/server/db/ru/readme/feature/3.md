# Переключение цветовых тем в приложении

## Общее

идея простая - создаём контекст, отдаём его вниз. Так же создаём компоненты управления через подход [Compund components](https://habr.com/ru/company/alfa/blog/647013/)

### Создание:

css

- создаём набор токенов
- собираем из них темы
- подключаем темы в рутовый компонет

См подробности в сниппете [css tokens](https://robzarel.github.io/features/snippet/18)

react

- создаём провайдер темы (ThemeProvider)
  -- объявляем внутр состояние темы и меняем его через торчащую наружу функцию
  -- сохраняем в сторадже и не забываем проставлять на html
  -- так же создаём useTheme хук и торчим его наружу для использования в приложении
- оборачиваем приложение в провайдер

См подробности в сниппете [ThemeProvider](https://robzarel.github.io/features/snippet/19)

### "Включение" темы

- переключатель: просто юзаем useTheme и хендлим контролы
- css: используем переменные из обьявленных тем

### Прокидываем контекст вниз

```typescript
import React from 'react';
import ReactDOM from 'react-dom/client';

import ThemeProvider from './components/theme-provider';
import App from './pages'; // рутовый компонент

import './index.css'; // базовые стили нашего приложения
import './components/theme-provider/themes.css'; // подключаем глобальные переменные для переключения тем

const root = document.getElementById('root') as HTMLElement;

ReactDOM.createRoot(root).render(
  <ThemeProvider>
    <App />
  </ThemeProvider>
);
```

### Ловим контекст и проставляем тему

#### CSS

```css
  .class {
    color: rgba(var(--accent), .75);
  }

  ...
```

#### Typescript

```typescript
  import { useTheme } from '../../components/theme-provider';
  import Styles from './index.module.css';
  ...

  const component = () => {

    const { theme } = useTheme();
    const value = theme === 'dark' ? option_1 : option_2;

    return (
      <div className={Styles.class}>{/* some markup that use selected theme value */}</div>
    );
  }

```
